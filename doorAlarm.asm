ORG 00h
	
	MOV DPTR, #DOORCODE
	MOV P3, #0FFh	;INPUT
	;CLR P1.7		;STOP RINGING
	MOV P1, #7Fh	;SEND BLANK TO CA DISPLAY
	
	AGAIN:
	MOV A, P3
	SETB ACC.6
	CJNE A, #0FFh, OUTLOOP
	SJMP AGAIN
	
	OUTLOOP:
	CPL A
	MOV R1, #00h		;COUNTER
	
	OUTLOOP1:
	RRC A
	JC OUTLOOP2
	INC R1
	SJMP OUTLOOP1
	
	OUTLOOP2:
	MOV A, R1
	MOVC A, @A+DPTR
	
	BACK:
	MOV P1, A
	SETB P1.7
	SJMP BACK
	
	DOORCODE:
	DB  0C0h, 0F9h, 0A4h, 0B0h, 99h, 92h, 00h, 82h

END